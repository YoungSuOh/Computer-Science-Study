어플리케이션을 개발할 때, 데이터베이스를 선택할 때 고민하게 된다.

→ MySQL과 같은 SQL을 사용할까? 아니면 MongoDB와 같은 NoSQL을 사용할까?

보통 Spring에서 개발할 때 MySQL을, Node.js에서는 MongoDB를 주로 사용했을 것이다.

하지만 그냥  단순히 프레임워크에 따라 결정하는 것이 아니다. 프로젝트를 진행하게 앞서 적합한 데이터 베이스를 선택해야  한다. 차이점을 알아보자

## 관계형 데이터베이스

SQL을 사용하면 RDBMS에서 데이터를 저장, 수정, 삭제 및 검색 할 수 있음

관계형 데이터베이스에는 **핵심적인 두 가지 특징**이 있다.

- 데이터는 **정해진 데이터 스키마에 따라 테이블에 저장**된다.
- 데이터는 **관계를 통해 여러 테이블에 분산**된다.

데이터는 테이블에 레코드로 저장되는데, 각 테이블마다 명확하게 정의된 구조가 있다. 해당 구조는 필드의 이름과 데이터 유형으로 정의된다.

따라서 **스키마를 준수하지 않은 레코드는 테이블에 추가할 수 없다.** 

즉, 스키마를 수정하지 않는 이상은 정해진 구조에 맞는 레코드만 추가가 가능한 것이 관계형 데이터베이스의 특징 중 하나다.

또한, 데이터의 중복을 피하기 위해 '관계'를 이용한다.



하나의 테이블에서 중복 없이 하나의 데이터만을 관리하기 때문에 다른 테이블에서 부정확한 데이터를 다룰 위험이 없어지는 장점이 있다.

## 비관계형 데이터베이스

말그대로 관계형 DB의 반대다.

**스키마도 없고, 관계도 없다!**

NoSQL에서는 레코드를 문서(documents)라고 부른다.

여기서 SQL과 핵심적인 차이가 있는데, SQL은 정해진 스키마를 따르지 않으면 데이터 추가가 불가능했다. 하지만 **NoSQL에서는 다른 구조의 데이터를 같은 컬렉션에 추가가 가능**하다.

문서(documents)는 Json과 비슷한 형태로 가지고 있다. 관계형 데이터베이스처럼 여러 테이블에 나누어담지 않고, 관련 데이터를 동일한 '컬렉션'에 넣는다.

따라서 위 사진에 SQL에서 진행한 Orders, Users, Products 테이블로 나눈 것을 NoSQL에서는 Orders에 한꺼번에 포함해서 저장하게 된다.

따라서 **여러 테이블에 조인할 필요없이** 이미 필요한 모든 것을 갖춘 문서를 작성하는 것이 NoSQL이다. (**NoSQL에는 조인이라는 개념이 존재하지 않음**)

그러면 조인하고 싶을 때 NoSQL은 어떻게 할까?

→ 컬렉션을 통해 데이터를 복제하여 각 컬렉션 일부분에 속하는 데이터를 정확하게 산출하도록 한다.

하지만 이러면 데이터가 중복되어 서로 영향을 줄 위험이 있다. 따라서 조인을 잘 사용하지 않고 자주 변경되지 않는 데이터일 때 NoSQL을 쓰면 상당히 효율적이다. 

## 확장 개념

두 데이터베이스를 비교할 때 중요한 Scaling 개념도 존재한다.

데이터베이스 서버의 확장성은 '수직적' 확장과 '수평적' 확장으로 나누어진다

1. 수직적 확장 : 단순히 데이터베이스 서버의 성능을 향상시키는 것 (ex. CPU 업그레이드)
2. 수평적 확장 : 더 많은 서버가 추가되고 데이터베이스가 전체적으로 분산됨을 의미 (하나의 데이터베이스에서 작동하지만 여러 호스트에서 작동)

데이터 저장 방식으로 인해 SQL 데이터베이스는 일반적으로 수직적 확장만 지원함

수평적 확장은 NoSQL 데이터베이스에서만 가능

## SQL 사용이 적합한 경우

### **1. 복잡한 데이터 관계를 다루는 경우**

- **사례**: 은행 시스템, ERP, CRM(고객 관계 관리)
- **이유**:
    - 은행 시스템의 경우 계좌, 고객, 거래 내역 등 데이터 간 관계가 복잡함.
    - SQL은 관계형 데이터베이스로 설계되어 있어 외래 키(Foreign Key)와 JOIN을 통해 데이터 간 관계를 쉽게 관리할 수 있음.
    - 데이터 무결성이 중요한 환경에서 트랜잭션(ACID)을 보장하므로 데이터 일관성을 유지할 수 있음.
    

### **2. 스키마가 고정되어 있고 명확한 경우**

- **사례**: 회계 시스템, 재고 관리 시스템
- **이유**:
    - 회계 데이터는 정형화된 테이블 구조를 가지며, 수정 가능성이 낮음.
    - SQL 데이터베이스는 정해진 스키마를 통해 데이터를 저장하고 조회하는 데 최적화되어 있음.
    - 미리 정의된 스키마는 데이터 무결성을 보장하며, 잘못된 데이터 입력을 방지함.

### **3. 데이터 변경이 자주 발생하는 경우**

- **사례**: 전자상거래(쇼핑몰) 시스템
- **이유**:
    - 주문 상태(주문 접수, 배송 중, 배송 완료 등), 재고 정보 등이 지속적으로 업데이트됨.
    - SQL은 중복 데이터를 최소화하고, 한 번의 수정으로 전체 데이터의 일관성을 유지할 수 있음.
    - 이를 통해 중복 관리와 수정 비용을 절약할 수 있음.

### **4. 트랜잭션이 중요한 경우**

- **사례**: 온라인 결제 시스템
- **이유**:
    - 결제는 한 번에 여러 작업(결제 승인, 재고 감소, 고객 알림)을 포함하며, 이 작업들이 모두 성공해야 함.
    - SQL 데이터베이스는 트랜잭션을 지원하며, 이를 통해 모든 작업이 성공하거나 실패하는 **원자성**을 보장할 수 있음.

## NoSQL 사용이 적합한 경우

### **1. 정확한 데이터 구조를 사전에 알 수 없는 경우**

- **사례**: 스타트업 초기 프로토타입 개발
- **이유**:
    - 개발 초기에 데이터 구조가 자주 변경될 수 있음.
    - NoSQL은 스키마리스(schema-less) 구조를 사용하므로 새로운 필드를 쉽게 추가할 수 있어 개발 속도가 빨라짐.

### **2. 대량의 데이터를 처리해야 하는 경우**

- **사례**: IoT 데이터 수집, 로그 데이터 관리
- **이유**:
    - IoT 장치나 로그 데이터는 짧은 시간 동안 대량으로 생성됨.
    - NoSQL은 분산 시스템으로 설계되어 있어 데이터가 많아져도 수평 확장을 통해 처리 용량을 늘릴 수 있음.
    - NoSQL 데이터베이스는 데이터 읽기/쓰기 속도가 매우 빠름.

### 3. **읽기 작업이 많고 쓰기가 적은 경우**

- **사례**: 소셜 네트워크 뉴스피드, 캐시 시스템
- **이유**:
    - 소셜 네트워크는 사용자 활동에 따라 많은 데이터를 읽어와야 하지만, 상대적으로 쓰기 빈도가 낮음.
    - NoSQL은 데이터 읽기 작업에 최적화되어 있으며, 데이터를 애플리케이션 요구사항에 맞게 저장하므로 성능이 뛰어남.

### 4. **수평 확장이 필요한 경우**

- **사례**: 대형 전자상거래(아마존, 이베이)나 글로벌 서비스(넷플릭스, 페이스북)
- **이유**:
    - SQL은 수직 확장(더 강력한 서버로 업그레이드)에 의존하는 반면, NoSQL은 수평 확장(서버를 추가하여 확장)을 통해 데이터를 처리할 수 있음.
    - 수평 확장은 대량의 데이터와 트래픽을 처리하는 데 유리함.

### 5. **비정형 데이터를 다뤄야 하는 경우**

- **사례**: JSON 기반 API 데이터, 이미지 및 동영상 메타데이터
- **이유**:
    - 비정형 데이터는 구조화되지 않은 정보(예: JSON, XML, 이미지)가 포함됨.
    - NoSQL은 문서 지향(Document-Oriented) 구조를 지원하므로, JSON 같은 데이터를 저장하고 빠르게 조회할 수 있음.